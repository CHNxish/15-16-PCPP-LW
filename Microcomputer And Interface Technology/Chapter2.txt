1)微机发展及应用
1946年 ENIAC 第一台计算机

计算机发展：
电子管 -> 晶体管 -> 中，小规模集成电路 -> 大规模集成电路

微机发展：
第一代 4位和低档8位微型计算机
Inter 4004 -> Inter 4040 -> Inter 8008
代表性微机： MCS-4 MCS-8

第二代 中，高档8位微型计算机
Inter 8080 -> Inter 8085
代表性微机： Apple的苹果机和Inter的单片机

第三代 16位微型计算机
Inter 8086/8088
代表性微机： IBM PC/XT/AT

第四代 32位微型计算机
Inter 80386 -> 奔腾 Pentium

功能：
数值计算，数据处理及信息管理
过程控制及智能化仪器仪表

2)微型计算机中使用的技术
 1)流水线技术
 为了提高计算机的工作速度，采用将某些功能部件分离，将一些大的顺序操作分解由不同
 功能部件分别完成，在时间上重叠的子操作。
 2)高速缓冲器
 3)虚拟内存技术
 4)微程序控制
 5)精简指令系统计算机 RISC CISC
 6)多媒体技术
 7)多处理器结构

3)微型计算机软硬件结构

计算机硬件组成
1)运算器
2)控制器
3)存储器
4)输入设备
5)输出设备
运算器和控制器构成中央处理器
中央处理器和存储器中的内存构成主机
外存和输入输出设备构成外部设备

微型计算机硬件组成
系统总线 + 微处理器 + I/O设备接口 + I/O设备 + 存储器

微处理器：简称μP，由大规模集成电路组成

微型计算机：简称μC和MC，以微处理器为核心，配上存储器，输入输出接口电路
及系统总线来组成的计算机

系统总线
1)由传送的信息区分
控制总线 地址总线 数据总线
2)由传送方向区分
单向线 双向线
3)由传送时的三态门电路来区分
高电平 低电平 高阻态

总线主控设备 总线被控设备
1)同一时间，只能有一个总线主控设备控制总线的信息传送
2)同一时间，只能有一个总线被控设备发送信息，但可有多个被控设备接受信息

微型计算机系统
1)微型计算机(单片机，单板机，多板机)
 1)微处理器
  1)算数逻辑部件
  2)寄存器阵列
  3)控制电路
 2)总线
  1)控制总线
  2)数据总线
  3)地址总线
 3)存储器
  1)rom,prom,eprom
  2)ram
 4)I/O电路
  1)串行I/O电路
  2)并行I/O电路
  3)定时器/计数器电路
2)软件
 1)系统软件
 2)应用软件
3)电源
4)I/O设备（打印机，显示器，键盘，磁盘控制器，A/D，D/A转换器）

微机工作过程（执行程序的过程）
取指令 -> 指令译码 -> 取操作数 -> 执行指令 -> 存放运算结果

4)8086/8088微处理器

8086/8088微处理器 8086采用单+5V电源，40根引脚的双列直插式封装，
能寻址1M的存储单元和64kb的I/O端口

8086/8088微处理器内部结构
1)总线接口部件（BIU）
BIU : 
 1)段寄存器(cs,ds,ss,es)
 2)指令指针寄存器(ip)
 3)地址加法器
 4)总线控制电路
 5)指令队列缓冲器
功能：
 1)形成访问存储器或I/O接口的物理地址
 2)从内存的代码段中取指令送到指令队列缓冲器中
 3)读取操作数参加EU运算或存放运算结果到指定地址
指令队列缓冲器：
 1)取指令时，每当指令队列缓冲区存满1条指令后，EU就立即执行
 2)指令队列缓冲区中只要空出2个(对8086)或空出1个(对8088)指令字节时，BIU
 便立即自动执行取指操作，直到填满为止
 3)在EU执行指令过程中，指令需要对存储器或I/O设备存取数据时，BIU
 将在执行完现行取指的总线后的下一个总线周期时，对指定的内存单元或I/O设备进行存取操作，
 交换的数据经BIU由EU执行
 4)当EU执行完转移，调用返回指令时，则要清除指令队列缓冲器，
 并要求BIU从新地址重新开始取指令
2)执行部件（EU）
 1)算数逻辑单元(ALU)
 2)通用寄存器
 3)标志寄存器
 4)EU控制电路
功能
 1)从BIU的指令队列缓冲器中取指令进行译码，执行
 2)负责所有算术，逻辑运算及16位偏移地址计算
 3)向BIU提供运算结果及16位偏移地址

14个16位寄存器
寄存器
1)通用寄存器
 1)数据寄存器
 ax,bx,cx,dx
 2)指针寄存器
  1)堆栈指针 sp
  2)基数指针 bp
 3)变址寄存器
  1)目的变址 di
  2)源变址 si
2)控制寄存器
 1)指令指针
 ip
 2)状态标志
 flag
3)段寄存器
 1)代码段
 cs
 2)数据段
 ds
 3)堆栈段
 ss
 4)附加段
 es
 
flag 状态标志寄存器 9个标志位
6个状态标志
CF 0 进位
PF 2 奇偶性
AF 4 辅助进位
ZF 6 零
SF 7 符号
OF 11 溢出
3个控制标志
DF 10 方向
IF 9 中断运行
TF 8 单步陷阱

8086/8088 引脚信号及功能
1)引脚功能
即引脚信号的定义，通常用英文单词或英文缩写来表示，其名字基本反映了引脚信号的作用和含义
2)信号的流向
信号从芯片向外输出
从外部向芯片输入
双向
3)有效电平
决定引脚是否工作由逻辑电路控制
有些引脚是低电平有效(负逻辑)
有些引脚是高电平有效(正逻辑)
有些引脚分时复用，在不同模式下有不同功能和有效电平
有些引脚是边沿有效，及信号上升沿或下降沿有效
4)三态
高电平，低电平(正常输入或输出)，高阻态(悬空)

最大工作模式:系统中通常有两个或多个微处理器
最小工作模式:系统中只有8086/8088微处理器
8087 数值运算协处理器 8089 I/O处理器

8086
1)GND 地线
2)AD14
3)AD13
4)AD12
5)AD11
6)AD10
7)AD9
8)AD8
9)AD7
10)AD6
11)AD5
12)AD4
13)AD3
14)AD2
15)AD1
16)AD0
17)NMI 非屏蔽
18)INTR 可屏蔽
19)CLK 时钟信号
20)GND
21)RESET 复位
22)READY 准备就绪
23)TEST(低) 对wait指令监视
24) ~~ 31)
32)RD(低) 读
33)MN/MX(低) 最小，最大工作模式
34)BHE(低)/S7 
35)A19/S6
36)A18/S5 s5与IF
37)A17/S4
38)A16/S3
39)AD15
40)VCC

s4 s3
0 0 es
0 1 ss
1 0 cs
1 0 ds

最小工作模式:                            最大工作模式：
24)INTA(低) 可屏蔽中断请求响应             QS1 指令队列状态
25)ALE 地址锁存器允许信号                  QS0 
26)DEN(低) 数据允许信号                   S0(低) 总线周期状态信号
27)DT/R(低) 数据发送/接收信号              S1(低)
28)M/IO(低)                             S2(低)
29)WR(低) 写信号                         LOCK(低) 总线封锁信号
30)HLDA 总线请求响应                      RQ(低)/GT1(低) 总线请求响应
31)HOLD 总线请求                         RQ(低)/GT0(低) 总线请求

配合CPU控制系统总线的电路
1）8282/8283锁存器
因为8086CPU是分时复用的，当CPU需要数据信息的时候，必须将地址信息存储起来，在下一个周期再使用
T1状态 发送地址信号给地址锁存器，将地址信号锁存起来
T3状态 CPU将数据发送到数据总线上，地址信号由地址锁存器输出到地址总线

8282锁存器引脚信号
DI0          VCC
DI1          DO0
DI2          DO1
DI3          DO2
DI4          DO3
DI5          DO4
DI6          DO5
DI7          DO6
OE(低)       DO7
GND          STB

地址锁存器需要存储20位地址信息和1位BHE(低)信息，所以需要3片8282/8283地址锁存器

2）8288总线控制器
8086在最大工作模式下不直接产生总线控制信号，8288总线控制器接受由8086CPU发送来的状态信号S1(低),S2(低),S3(低)和输入控制信号AEN(低)，CEN，IOB相结合产生总线命令和控制信号

8288总线控制器分系统总线工作方式和I/O总线工作方式

8288总线控制器引脚信号
IOB          VCC
CLK          S0(低)
S1(低)       S2(低)
DT/R(低)     MCE/PDEN(低)
ALE          DEN
AEN(低)      CEN
MRDC(低)     INTA(低)
AMWC(低)     INTA(低)
MWTC(低)     AIOWC(低)
GND          IOWC(低)

8288内部结构
 1）状态译码器
 S0(低) S1(低) S2(低)
 2）控制逻辑
 CLK AEN(低) CEN IOB
 3）命令信号发生器
 MRDC(低) MWTC(低) AMWC(低) IORC(低) IOWC(低) AIOWC(低) INTA(低)
 4）控制信号发生器
 DT/R(低) DEN MCE/PDEN(低) ALE

3）8286/8287总线收发器
提高8086CPU的数据总线的负载能力，再CPU和系统数据总线间接入总线双向缓冲器(总线收发器)

8286/8287总线收发器引脚信号
A0           VCC
A1           B0
A2           B1
A3           B2
A4           B3
A5           B4
A6           B5
A7           B6
OE(低)       B7
GND          T

4)8284时钟发生器

8086最小工作模式系统总线结构
MN/MX(低)接+5V电源，系统除了8086CPU外，还包括8284A时钟发生器，3片8282地址锁存器和2片8286总线收发器

8086最大工作模式系统总线结构
MN/MX(低)接地线时，比最小工作模式增加了一个8288总线控制器
由8288产生相应的内存储器或I/O端口读写命令和总线控制信号，控制8282地址锁存器和8286总线收发器


总线周期时序
CPU在取指令和执行指令过程中，需要分成很多微操作，这些微操作由时序控制。所以CPU需要一个定时电路，产生一个个节拍，使微操作按时序发生
时序也就是每一个微操作所经历的时间周期，所产生的定时信号也就是CPU中的时钟或主频

时钟周期是CPU处理动作最小时间单位。
时钟周期的宽度是时钟信号中相邻两上升沿之间的时间间隔，一般分T1，T2，T3，T4，Tw等状态。每个时钟周期都有高电平和低电平，一般来说微处理器这两部分的宽度是一般相同的，因此时钟周期分正半周和负半周，时间宽度各位T/2

时钟周期和时钟频率是倒数关系
8086CPU的时钟频率是5MHz，时钟周期是200ns

总线周期是CPU对于存储器或I/O端口访问一次所需要的时间
一般总线周期包含4个T状态，即T1,T2,T3,T4，因为存储器和外设速度较慢，在T3之后可能插入多个等待状态Tw(一个状态就是一个时钟周期)

指令周期是一条指令从存储器中取出到执行所需的时间
一般指令的指令周期都不相同，但是每个指令的第一总线周期都是取指令，因此指令周期包含多个总线周期

8086/8088读总线周期
		
CLK            T1 		T2 		T3 		T4 
A19/S6~A16/S3  地址输出    状  态  输  出
BHE(低)/S7     
AD15~AD0       地址输出          数据输出
ALE            高电平      低    电   平
M/IO(低)       低 = I/O 读   高 = 存储器读
RD(低)
DT/R(低)          低      电      平
DEN(低)        高   电   平   低   电   平


8086/8088写总线周期

CLK            T1 		T2 		T3 		T4 
A19/S6~A16/S3  BHE输出    状  态  输  出
BHE(低)/S7     
AD15~AD0       地址输出   数  据  输   出
ALE            高电平      低    电   平
M/IO(低)       低 = I/O 写   高 = 存储器写
WR(低)
DT/R(低)           高     电      平   
DEN(低)        高   电   平   低   电   平


8086/8088存储器管理
位(Bit)：计算机存储信息的基本单位是一个二进制位，1位可以存储一个二进制数0或1
字节(Byte)：每8位二进制信息可以组成一个字节，从D7到D0
字(Word)：每16位二进制信息，即2个字节可以组成一个字
地址：存储器中以字节为单位存储信息，成为存储单元，每个存储单元分配一个存储器地址，地址也是二进制表示
存储容量：存储容量与内存大小和地址总线根数有关，内存大小决定了当地址总线根数足够多时，能访问的存储容量，地址总线根数限制了实
际能访问的存储容量，当地址根数是N时，可访问2^N个存储单元
8086/8088内部CPU地址总线是20根，所能访问的存储容量是2^20byte = 1MB，地址是00000H～FFFFFH
一个字节可以直接存入一个存储单元，一个字需要分别存入两个相邻的存储单元，高8位放入高位地址，低8位放入地位地址

非规则存放和规则存放
当存放一个字的时候，其低位字节可以放入奇数地址，也可以放入偶数地址，前者称为非规则存放，8086CPU读写一个非规则存放的字需要两
个总线周期，后者称为规则存放，8086CPU读写一个规则存放的字需要一个总线周期


8086能访问的1MB存储空间实际上分为两个512KB的存储体，又称为存储库。低位库与数据总线D7～D0相连，库中全部是偶数地址，高位库与数据总线D19~D10相连，库中全部是奇数地址
地址总线A19～A0可以同时对高，低位库进行访问，A0和BHE(低)决定了访问的是低位还是高位库


存储器的分段技术
8086CPU的算数逻辑单元和寄存器都是16位，寻址能力只有64KB，所以CPU通过“段加偏移”技术使寻址能力达到1M
物理地址 = 段地址 * 16 + 偏移地址
段地址决定了每个物理地址是能被16整除的地址
偏移地址决定了每个段能访问64KB空间
代码段：CS * 16 + IP
数据段：DS * 16
堆栈段：SS * 16 + SP
